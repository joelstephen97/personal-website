@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light Mode - Zinc/Stone hybrid */
    --bg: 250 250 250;
    --bg-secondary: 244 244 245;
    --foreground: 9 9 11;
    --foreground-secondary: 82 82 91;
    --foreground-muted: 113 113 122;
    --accent: 185 28 28;
    --accent-hover: 220 38 38;
    --border: 228 228 231;
    --glass: 250 250 250 / 0.72;
    --glass-solid: 250 250 250 / 0.92;
    --success: 16 185 129;
    --error: 239 68 68;
    --terminal-bg: 30 41 59;
    --terminal-text: 248 250 252;
    --terminal-muted: 148 163 184;
  }

  .dark {
    /* Dark Mode - Neutral black */
    --bg: 3 3 3;
    --bg-secondary: 10 10 10;
    --foreground: 250 250 250;
    --foreground-secondary: 161 161 170;
    --foreground-muted: 113 113 122;
    --accent: 220 38 38;
    --accent-hover: 248 113 113;
    --border: 23 23 23;
    --glass: 10 10 10 / 0.72;
    --glass-solid: 23 23 23 / 0.92;
    --success: 52 211 153;
    --error: 248 113 113;
    --terminal-bg: 30 41 59;
    --terminal-text: 248 250 252;
    --terminal-muted: 148 163 184;
  }

  html {
    scroll-behavior: smooth;
    scroll-padding-top: 5rem;
    -webkit-font-smoothing: antialiased;
  }

  body {
    @apply bg-[rgb(var(--bg))] text-[rgb(var(--foreground))];
    font-family:
      "Geist",
      "Inter",
      -apple-system,
      BlinkMacSystemFont,
      "SF Pro Display",
      sans-serif;
    line-height: 1.6;
    transition:
      background-color 300ms cubic-bezier(0.4, 0, 0.2, 1),
      color 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  ::selection {
    @apply bg-[rgb(var(--accent)/0.2)] text-[rgb(var(--accent-hover))];
  }
}

@layer components {
  .glass {
    @apply bg-[rgb(var(--glass))] backdrop-blur-xl border border-[rgb(var(--border))];
  }

  .glass-solid {
    @apply bg-[rgb(var(--glass-solid))] backdrop-blur-2xl border border-[rgb(var(--border))];
  }

  .btn-primary {
    @apply px-5 py-3 rounded-xl font-semibold text-white shadow-lg transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/50 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--bg))];
    background: linear-gradient(
      to right,
      rgb(var(--accent)),
      rgb(var(--accent-hover))
    );
    box-shadow: 0 10px 15px -3px rgb(var(--accent) / 0.25);
  }

  .btn-primary:hover:not(:disabled) {
    box-shadow: 0 10px 15px -3px rgb(var(--accent) / 0.4);
  }

  .btn-secondary {
    @apply px-5 py-3 rounded-xl font-semibold border transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/50 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--bg))];
    background: rgb(var(--glass));
    border-color: rgb(var(--border));
    color: rgb(var(--foreground));
  }

  .btn-secondary:hover:not(:disabled) {
    border-color: rgb(var(--accent) / 0.5);
    color: rgb(var(--accent));
  }

  .text-accent {
    color: rgb(var(--accent));
  }

  .bg-accent-muted {
    background-color: rgb(var(--accent) / 0.1);
  }

  .border-accent-muted {
    border-color: rgb(var(--accent) / 0.3);
  }
}

/* Native form elements */
input[type="checkbox"],
input[type="radio"] {
  @apply appearance-none w-5 h-5 rounded-md bg-[rgb(var(--glass))] border-2 border-[rgb(var(--border))] cursor-pointer transition-all;
}

input[type="checkbox"]:checked {
  @apply border-[rgb(var(--accent))];
  background-color: rgb(var(--accent));
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L6.5 9.086l4.293-4.293a1 1 0 0 1 1.414 0z'/%3E%3C/svg%3E");
  background-size: 14px;
  background-position: center;
  background-repeat: no-repeat;
}

input[type="radio"] {
  @apply rounded-full;
}

input[type="radio"]:checked {
  @apply border-[rgb(var(--accent))];
  background-color: rgb(var(--accent));
  box-shadow: inset 0 0 0 4px rgb(var(--bg));
}

input[type="range"] {
  @apply appearance-none w-full h-1.5 rounded-full bg-[rgb(var(--border))] cursor-pointer;
}

input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none w-5 h-5 rounded-full shadow-md cursor-pointer;
  background-color: rgb(var(--foreground));
  border: 2px solid rgb(var(--border));
}

select {
  @apply appearance-none w-full px-4 py-3 rounded-xl bg-[rgb(var(--glass))] border border-[rgb(var(--border))] text-[rgb(var(--foreground))] cursor-pointer pr-10;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2386868b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px;
}

select:focus {
  @apply outline-none;
  box-shadow: 0 0 0 2px rgb(var(--accent) / 0.3);
  border-color: rgb(var(--accent));
}

/* Page transition - cinematic blur + fade + slide */
.page-enter-active,
.page-leave-active {
  transition:
    opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
.page-enter-from,
.page-leave-to {
  opacity: 0;
  filter: blur(8px);
  transform: translateY(12px);
}

/* View Transitions API - only main content transitions; header/footer stay static */
.page-content {
  view-transition-name: page-content;
}
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
}
::view-transition-old(page-content) {
  animation: view-transition-fade-blur-out 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
::view-transition-new(page-content) {
  animation: view-transition-fade-blur-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
@keyframes view-transition-fade-blur-out {
  from {
    opacity: 1;
    filter: blur(0);
  }
  to {
    opacity: 0;
    filter: blur(8px);
  }
}
@keyframes view-transition-fade-blur-in {
  from {
    opacity: 0;
    filter: blur(8px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
