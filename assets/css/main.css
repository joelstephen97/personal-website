@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Tahoe Liquid Glass Light */
    --bg: 250 250 252;
    --bg-secondary: 245 245 247;
    --foreground: 28 28 30;
    --foreground-secondary: 60 60 67;
    --foreground-muted: 99 99 102;
    --accent: 234 53 53;
    --accent-hover: 255 71 71;
    --border: 229 229 234;
    --glass: 238 240 248;
    --glass-solid: 242 244 250;
    --glass-border: rgb(210 214 222);
    --glass-highlight: rgba(255, 255, 255, 0.6);
    --glass-shadow:
      0 1px 3px rgba(0, 0, 0, 0.06), 0 4px 12px rgba(0, 0, 0, 0.1);
    --success: 52 199 89;
    --error: 255 59 48;
    --terminal-bg: 28 28 30;
    --terminal-text: 142 142 147;
    --terminal-muted: 99 99 102;
    --terminal-red: 255 95 87;
    --terminal-yellow: 255 189 46;
    --terminal-green: 40 202 65;
    --terminal-prompt: 0 122 255;
    --terminal-path: 0 199 190;
  }

  .dark {
    /* Tahoe Liquid Glass Dark */
    --bg: 28 28 30;
    --bg-secondary: 22 22 24;
    --foreground: 242 242 247;
    --foreground-secondary: 142 142 147;
    --foreground-muted: 99 99 102;
    --accent: 239 68 68;
    --accent-hover: 255 90 90;
    --border: 58 58 60;
    --glass: 44 44 46 / 0.6;
    --glass-solid: 44 44 46 / 0.88;
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-highlight: rgba(255, 255, 255, 0.05);
    --glass-shadow: 0 0 0 0 transparent;
    --success: 48 209 88;
    --error: 255 69 58;
    --terminal-bg: 22 22 24;
    --terminal-text: 142 142 147;
    --terminal-muted: 99 99 102;
    --terminal-red: 255 95 87;
    --terminal-yellow: 255 189 46;
    --terminal-green: 40 202 65;
    --terminal-prompt: 10 132 255;
    --terminal-path: 64 200 224;
  }

  html {
    scroll-behavior: smooth;
    scroll-padding-top: 5rem;
    -webkit-font-smoothing: antialiased;
  }

  body {
    @apply bg-[rgb(var(--bg))] text-[rgb(var(--foreground))];
    font-family:
      "Geist",
      "Inter",
      -apple-system,
      BlinkMacSystemFont,
      "SF Pro Display",
      sans-serif;
    line-height: 1.6;
  }

  ::selection {
    @apply bg-[rgb(var(--accent)/0.2)] text-[rgb(var(--accent-hover))];
  }
}

@layer components {
  .glass {
    @apply bg-[rgb(var(--glass))] border;
    border-color: var(--glass-border);
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    box-shadow:
      inset 0 1px 0 var(--glass-highlight),
      var(--glass-shadow);
  }

  .glass-solid {
    @apply bg-[rgb(var(--glass-solid))] border;
    border-color: var(--glass-border);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    box-shadow:
      inset 0 1px 0 var(--glass-highlight),
      var(--glass-shadow);
  }

  .btn-primary {
    @apply px-5 py-3 rounded-2xl font-semibold text-white transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/50 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--bg))];
    background: linear-gradient(
      to right,
      rgb(var(--accent)),
      rgb(var(--accent-hover))
    );
    box-shadow: 0 4px 14px rgb(var(--accent) / 0.2);
  }

  .btn-primary:hover:not(:disabled) {
    box-shadow: 0 6px 20px rgb(var(--accent) / 0.3);
  }

  .btn-secondary {
    @apply px-5 py-3 rounded-2xl font-semibold border transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-accent/50 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--bg))];
    background: rgb(var(--glass));
    border-color: var(--glass-border);
    color: rgb(var(--foreground));
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    box-shadow: inset 0 1px 0 var(--glass-highlight);
  }

  .btn-secondary:hover:not(:disabled) {
    border-color: rgb(var(--accent) / 0.5);
    color: rgb(var(--accent));
  }

  .text-accent {
    color: rgb(var(--accent));
  }

  .bg-accent-muted {
    background-color: rgb(var(--accent) / 0.1);
  }

  .border-accent-muted {
    border-color: rgb(var(--accent) / 0.3);
  }
}

/* Native form elements - Liquid Glass style */
input[type="checkbox"],
input[type="radio"] {
  @apply appearance-none w-5 h-5 rounded-lg bg-[rgb(var(--glass))] border-2 cursor-pointer transition-all;
  border-color: var(--glass-border);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
}

input[type="checkbox"]:checked {
  @apply border-[rgb(var(--accent))];
  background-color: rgb(var(--accent));
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 0 1 0 1.414l-5 5a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L6.5 9.086l4.293-4.293a1 1 0 0 1 1.414 0z'/%3E%3C/svg%3E");
  background-size: 14px;
  background-position: center;
  background-repeat: no-repeat;
}

input[type="radio"] {
  @apply rounded-full;
}

input[type="radio"]:checked {
  @apply border-[rgb(var(--accent))];
  background-color: rgb(var(--accent));
  box-shadow: inset 0 0 0 4px rgb(var(--bg));
}

input[type="range"] {
  @apply appearance-none w-full h-1.5 rounded-full bg-[rgb(var(--border))] cursor-pointer;
}

input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none w-5 h-5 rounded-full shadow-md cursor-pointer;
  background-color: rgb(var(--foreground));
  border: 2px solid rgb(var(--border));
}

select {
  @apply appearance-none w-full px-4 py-3 rounded-2xl bg-[rgb(var(--glass))] border text-[rgb(var(--foreground))] cursor-pointer pr-10;
  border-color: var(--glass-border);
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2386868b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px;
}

select:focus {
  @apply outline-none;
  box-shadow: 0 0 0 2px rgb(var(--accent) / 0.3);
  border-color: rgb(var(--accent));
}

/* Page transition - cinematic blur + fade + slide */
.page-enter-active,
.page-leave-active {
  transition:
    opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    filter 0.35s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}
.page-enter-from,
.page-leave-to {
  opacity: 0;
  filter: blur(8px);
  transform: translateY(12px);
}

/* View Transitions API - only main content transitions; header/footer stay static */
.page-content {
  view-transition-name: page-content;
}
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
}
::view-transition-old(page-content) {
  animation: view-transition-fade-blur-out 0.35s cubic-bezier(0.4, 0, 0.2, 1)
    forwards;
}
::view-transition-new(page-content) {
  animation: view-transition-fade-blur-in 0.35s cubic-bezier(0.4, 0, 0.2, 1)
    forwards;
}

/* Project card shared-element transition - smooth expand/collapse */
::view-transition-old(project-detail),
::view-transition-new(project-detail) {
  animation-duration: 0.35s;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}
@keyframes view-transition-fade-blur-out {
  from {
    opacity: 1;
    filter: blur(0);
  }
  to {
    opacity: 0;
    filter: blur(8px);
  }
}
@keyframes view-transition-fade-blur-in {
  from {
    opacity: 0;
    filter: blur(8px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

/* Container queries for project grid - content-density layout */
.project-grid {
  container-type: inline-size;
  container-name: project-grid;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

@media (prefers-reduced-transparency: reduce) {
  .glass,
  .glass-solid,
  .btn-secondary {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  .glass {
    background: rgb(var(--bg-secondary));
  }
  .glass-solid {
    background: rgb(var(--bg-secondary) / 0.98);
  }
}
